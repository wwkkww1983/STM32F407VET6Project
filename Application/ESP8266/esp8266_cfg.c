#include "esp8266_cfg.h"

//===缓存区定义
UINT8_T g_ESP8266_RX_BUFFER[ESP8266_BUFFER_MAX_SIZE] = { 0 };															//---接收缓存区
UINT8_T g_ESP8266_TX_BUFFER[ESP8266_BUFFER_MAX_SIZE] = { 0 };															//---接收缓存区

//===8266的定义
ESP8266_HandlerType			g_Esp8266Device0={0};
pESP8266_HandlerType		pEsp8266Device0=&g_Esp8266Device0;

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：设备1的初始化
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_UART_Device0_Init(ESP8266_HandlerType* ESP8266x)
{
	//---空闲状态
	ESP8266x->msgTaskStep=0;
	//---默认工作模式AP模式
	ESP8266x->msgWorkMode=ESP8266_AP;
	//---调度时间是100ms
	ESP8266x->msgIntervalTime=100;
	//---使用的串口
	ESP8266x->msgUART= ESP8266_UART;
	return OK_0;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：设备1的初始化
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_UART_Device1_Init(ESP8266_HandlerType* ESP8266x)
{
	return ERROR_1;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：设备1的初始化
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_UART_Device2_Init(ESP8266_HandlerType* ESP8266x)
{
	return ERROR_1;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：ESP8266初始化
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_UART_Init(ESP8266_HandlerType *ESP8266x,UINT32_T(*pFuncTimerTick)(void))
{
	if ((ESP8266x != NULL) && (ESP8266x == ESP8266_TASK_ONE))
	{
		ESP8266_UART_Device0_Init(ESP8266x);
	}
	else if ((ESP8266x != NULL) && (ESP8266x == ESP8266_TASK_TWO))
	{
		ESP8266_UART_Device1_Init(ESP8266x);
	}
	else if ((ESP8266x != NULL) && (ESP8266x == ESP8266_TASK_THREE))
	{
		ESP8266_UART_Device2_Init(ESP8266x);
	}
	else
	{
		return  ERROR_1;
	}
	UARTTask_Init(ESP8266x->msgUART, ESP8266_BUFFER_MAX_SIZE, g_ESP8266_RX_BUFFER, 0, ESP8266_BUFFER_MAX_SIZE, g_ESP8266_TX_BUFFER,0, pFuncTimerTick);
	//---注册滴答函数
	(pFuncTimerTick != NULL) ? (ESP8266x->msgTimeTick = pFuncTimerTick) : (ESP8266x->msgTimeTick = SysTickTask_GetTick);
	return OK_0;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：ESP8266的打印LOG信息
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
void ESP8266_LOG(ESP8266_HandlerType* ESP8266x, char* fmt, ...)
{
	va_list args;
	va_start(args, fmt);
	UARTTask_PrintfLog(ESP8266x->msgUART, fmt, args);
	va_end(args);
}


///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_SendString(void)
{
	return OK_0;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_ExitTransparentMode(void)
{
	return OK_0;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数：
//////功		能：
//////输入参数:
//////输出参数:
//////说		明：
//////////////////////////////////////////////////////////////////////////////
UINT8_T ESP8266_RST(void)
{
	return OK_0;
}

